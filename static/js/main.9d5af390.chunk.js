(this["webpackJsonprealm-test-app"]=this["webpackJsonprealm-test-app"]||[]).push([[0],{198:function(e,t){e.exports={getThisMonth:function(e){var t=new Date(e.getFullYear(),e.getMonth(),1);return t.setUTCHours(0,0,0,0),t},getNextMonth:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=11===e.getMonth()?new Date(e.getFullYear()+1,0,1):new Date(e.getFullYear(),e.getMonth()+1,1);n?t.setUTCHours(0,0,0,0):t.setHours(0,0,0,0);return t}}},249:function(e,t){e.exports={toEnUsDate:function(e){return new Date(e).toLocaleString("en-US")},toDateOnly:function(e){return function(e){var t=new Date(e),n=""+(t.getUTCMonth()+1),a=""+t.getUTCDate(),r=t.getUTCFullYear();n.length<2&&(n="0"+n);a.length<2&&(a="0"+a);return[n,a,r].join("-")}(new Date(e))}}},256:function(e,t){function n(e){for(var t=(new Date).getMonth(),n=t<1?1:t<4?4:t<7?7:t<10?10:1,a=n>t?n-t:n+12-t,r=0,o=0;o<a;o++)r+=e[o];return r}e.exports={convertForecastIntoRows:function(e){var t=n([e.most_likely[0],e.most_likely[1],e.most_likely[2]])+e.delivered_qtd,a=n([e.expiring[0],e.expiring[1],e.expiring[2]])+e.expired_qtd,r=t+a,o=n([e.risk[0],e.risk[1],e.risk[2]]),c=n([e.upside[0],e.upside[1],e.upside[2]]),l=[];return l.push({name:"Delivered",0:e.delivered_qtd,cq_field:"Delivered QTD",cq_call:e.delivered_qtd}),l.push({name:"Expired",0:e.expired_qtd,cq_field:"Expired QTD",cq_call:e.expired_qtd}),l.push({name:"Scheduled",0:e.scheduled[0],1:e.scheduled[1],2:e.scheduled[2],cq_field:"Delivered Call",cq_call:t}),l.push({name:"Expiring",0:e.expiring[0],1:e.expiring[1],2:e.expiring[2],cq_field:"Expired Call",cq_call:a}),l.push({name:"Most Likely $",0:e.most_likely[0],1:e.most_likely[1],2:e.most_likely[2],cq_field:"All-in Call",cq_call:r}),l.push({name:"Risk $",0:e.risk[0],1:e.risk[1],2:e.risk[2],cq_field:"ROQ Risk",cq_call:o}),l.push({name:"Upside $",0:e.upside[0],1:e.upside[1],2:e.upside[2],cq_field:"ROQ Upside",cq_call:c}),l},getCallFromThree:n}},393:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=393},458:function(e,t,n){e.exports=n(578)},463:function(e,t,n){},558:function(e,t){},577:function(e,t,n){},578:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),c=n.n(o);n(463),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(36),i=n(38),s=n(114),u=n(115),m=n(16),p=n(10),d=n.n(p),f=n(20),b=n(234),g=n(265),h=r.a.createContext("realm");n(468).config();var v="".concat("135479055030-15qjocokoqnti45qlantli50ov9au201.apps.googleusercontent.com")||!1,j="".concat("ShadowForce")||!1,E="".concat("http://localhost:3000")||!1,O="".concat("shadowforce-sivxs")||!1,w="".concat("mongodb-atlas")||!1,C="".concat("shf")||!1,y="".concat("psproject")||!1,k="".concat("revforecast")||!1,x="".concat("http://localhost:3000/google-callback")||!1;var _=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).setUser=function(e){if(a.setState({user:e}),a.state.app&&e){a.setFilter({active_user_filter:e.profile.email});var t=e.mongoClient(w).db(C).collection(y);a.setState({dbCollection:t});var n=e.mongoClient(w).db(C).collection(k);a.setState({fcstCollection:n})}},a.googleHandleRedirect=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.c();case 1:case"end":return e.stop()}}),e)}))),a.googleSignIn=Object(f.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.b.google(x),e.prev=1,e.next=4,a.state.app.logIn(t);case 4:n=e.sent,a.setUser(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),a.getUserAccessToken=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.state.app.currentUser.refreshCustomData();case 2:return e.abrupt("return",a.state.app.currentUser.accessToken);case 3:case"end":return e.stop()}}),e)}))),a.fetchFiltersDefaultValues=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.user){e.next=5;break}return e.next=3,a.state.user.functions.getFiltersDefaultValues();case 3:t=e.sent,a.setState({regionsList:t.regions.sort()||[],ownersList:t.owners.sort()||[],projectManagersList:t.projectManagers.sort()||[]});case 5:case"end":return e.stop()}}),e)}))),a.setLoadProcessing=function(e){a.setState({loadProcessing:e})},a.setProjects=function(e){a.setState({projects:e})},a.cleanLocalProjects=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({projects:[],projectWithCurrentMilestone:null});case 1:case"end":return e.stop()}}),e)}))),a.logOut=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.state.app.currentUser.logOut();case 2:a.setUser(a.state.app.currentUser);case 3:case"end":return e.stop()}}),e)}))),a.setFilter=function(e){var t=Object(m.a)(Object(m.a)({},a.state.filter),e);a.setState({filter:t})},a.setSorting=function(e){e.field=function(e){switch(e){case"name":case"region":case"owner":return e;case"expiration":return"details.product_end_date";case"stage":default:return"details.pm_stage_sortid"}}(e.field),a.setState({sort:e})},a.setProjectWithCurrentMilestone=function(e){a.setState({projectWithCurrentMilestone:e})},a.setIsEditing=function(e){a.setState({isEditing:e})},a.watcher=Object(f.a)(d.a.mark((function e(){var t,n,r,o,c,l,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.dbCollection){e.next=2;break}return e.abrupt("return");case 2:if(a.state.user&&a.state.app.currentUser){e.next=4;break}return e.abrupt("return");case 4:t=!0,n=!1,e.prev=6,o=function(){var e=i,t=e.clusterTime,n=e.operationType,r=e.fullDocument;if((!a.lastUpdateTime||a.lastUpdateTime<t)&&r){a.lastUpdateTime=t;var o=a.state,c=o.projects,l=o.projectWithCurrentMilestone,s=null;if("replace"===n||"update"===n){var u=e.fullDocument._id;c=c.map((function(t){return t._id===u?e.fullDocument:t})),l.project._id===u&&(s=Object(m.a)(Object(m.a)({},l),{},{project:e.fullDocument}))}else"insert"===n&&c.push(e.fullDocument);a.setState({projects:c}),s&&a.setProjectWithCurrentMilestone(s)}},c=Object(b.a)(a.state.dbCollection.watch());case 9:return e.next=11,c.next();case 11:return l=e.sent,t=l.done,e.next=15,l.value;case 15:if(i=e.sent,t){e.next=21;break}o();case 18:t=!0,e.next=9;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(6),n=!0,r=e.t0;case 27:if(e.prev=27,e.prev=28,t||null==c.return){e.next=32;break}return e.next=32,c.return();case 32:if(e.prev=32,!n){e.next=35;break}throw r;case 35:return e.finish(32);case 36:return e.finish(27);case 37:case"end":return e.stop()}}),e,null,[[6,23,27,37],[28,,32,36]])}))),a.getActiveUserName=function(){return a.state.user.profile.email},a.state=Object(m.a)(Object(m.a)({},a.state),{},{googleClientId:v,realmAppId:O,appName:j,copyrightLink:E,app:new g.a(O),user:null,dbCollection:null,fcstCollection:null,filter:{region:"",owner:"",project_manager:"",name:"",active:!0,active_user_filter:"",pm_stage:""},sort:{field:"details.pm_stage_sortid",order:"ASC"},regionsList:[],ownersList:[],projectManagersList:[],stagesList:["-None-","Not Started","Planning","In Progress","On Hold","Cancelled","Closed"],loadProcessing:!1,projects:null,projectWithCurrentMilestone:null,isEditing:!1}),a.funcs={setUser:a.setUser,googleSignIn:a.googleSignIn,googleHandleRedirect:a.googleHandleRedirect,getUserAccessToken:a.getUserAccessToken,logOut:a.logOut,fetchFiltersDefaultValues:a.fetchFiltersDefaultValues,setLoadProcessing:a.setLoadProcessing,setProjects:a.setProjects,cleanLocalProjects:a.cleanLocalProjects,setFilter:a.setFilter,setSorting:a.setSorting,setProjectWithCurrentMilestone:a.setProjectWithCurrentMilestone,setIsEditing:a.setIsEditing,watcher:a.watcher,getActiveUserName:a.getActiveUserName},a.lastUpdateTime=null,a}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(h.Provider,{value:Object(m.a)(Object(m.a)({},this.state),this.funcs)},this.props.children)}}]),n}(r.a.Component),M=n(449),S=n(42),N=n(616),D=n(598),I=n(599),T=n(292),R=n(429),P=n.n(R),U=n(105),F=n(367),L=n(597),B=n(428),V=n.n(B),q=Object(F.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},submit:{margin:e.spacing(3,0,2)},signInForm:{width:"100%",marginTop:e.spacing(3),marginBottom:e.spacing(1),display:"flex",justifyContent:"center"},errorBox:{width:"100%",marginTop:e.spacing(1),display:"flex",justifyContent:"center"}}}));function A(e){var t=e.appName,n=e.copyrightLink,a=e.googleSignIn,o=e.signInError,c=q();return r.a.createElement(L.a,{component:"main",maxWidth:"xs"},r.a.createElement(D.a,null),r.a.createElement("div",{className:c.paper},r.a.createElement(N.a,{className:c.avatar},r.a.createElement(P.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("div",{className:c.signInForm},r.a.createElement(V.a,{type:"light",onClick:a})),o&&r.a.createElement("div",{className:c.errorBox},r.a.createElement(U.a,{variant:"body2",color:"error",align:"center"},o))),r.a.createElement(T.a,{mt:1},r.a.createElement(H,{appName:t,copyrightLink:n})))}function H(e){var t=e.appName,n=e.copyrightLink;return r.a.createElement(U.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(I.a,{color:"inherit",href:n},t)," ",(new Date).getFullYear(),".")}A.defaultProps={signInError:null};var W=n(29),K=n(136),Y=n(39),$=n(15),z=n(605),Q=n(369),G=n(303),J=n(370),X=n(228),Z=n(244),ee=n.n(Z),te=n(452);function ne(e){var t=e.classes,n=e.inputPlaceHolder,a=e.onKeyDown,o=t.searchContainer,c=t.searchIcon,l=t.inputBaseRoot,i=t.inputBaseInput;return r.a.createElement("div",{className:o},r.a.createElement("div",{className:c},r.a.createElement(ee.a,null)),r.a.createElement(te.a,{placeholder:n,classes:{root:l,input:i},inputProps:{"aria-label":"search"},onKeyDown:a}))}var ae=n(368),re=n(600),oe=n(602),ce=n(603),le=n(604),ie=n(301),se=n(302),ue=n(307),me=n(246);function pe(e){var t=e.classes,n=e.filterButtonText,o=e.filterDialogTitle,c=e.filtersObject,l=e.applyButtonText,i=e.onApplyFilters,s=e.showEmptyValue,u=t.formContainer,m=Object(a.useState)(!1),p=Object(W.a)(m,2),d=p[0],f=p[1],b=function(){f(!1)};return r.a.createElement("div",{className:u},r.a.createElement(ae.a,{onClick:function(){f(!0)},variant:"contained"},n),r.a.createElement(re.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:d,onClose:b},r.a.createElement(oe.a,null,o),r.a.createElement(ce.a,null,r.a.createElement("form",{className:u},c.map((function(e){return r.a.createElement(de,{classes:{formControl:t.formControl},label:e.label,currentValue:e.currentValue,values:e.values,setValue:e.setValue,showEmptyValue:s})})))),r.a.createElement(le.a,null,r.a.createElement(ae.a,{onClick:b,color:"primary"},"Cancel"),r.a.createElement(ae.a,{onClick:function(){i(),f(!1)},color:"primary"},l))))}function de(e){var t=e.classes,n=e.label,a=e.currentValue,o=e.values,c=e.setValue,l=e.showEmptyValue,i=t.formControl;return r.a.createElement(ie.a,{className:i},r.a.createElement(se.a,{htmlFor:"demo-dialog-native"},n),r.a.createElement(ue.a,{native:!0,value:a,onChange:c,input:r.a.createElement(me.a,{id:"demo-dialog-native"})},l&&r.a.createElement("option",{value:""}),o.map((function(e){return r.a.createElement("option",{value:e},e)}))))}var fe=n(432),be=n.n(fe),ge=n(431),he=n.n(ge),ve=Object(F.a)((function(e){return{img:{width:"35px",height:"35px",borderRadius:"50%",objectFit:"cover"},textBlock:{display:"block",marginLeft:"0.5rem",textAlign:"left",overflow:"hidden",textOverflow:"ellipsis"},name:{fontSize:"14px",fontWeight:"600"},email:{fontSize:"11px",fontWeight:"500"}}}));function je(e){var t=ve(),n=e.avatarImage,a=e.accountName,o=e.accountEmail;return r.a.createElement(r.a.Fragment,null,n?r.a.createElement("img",{src:n,className:t.img}):r.a.createElement(he.a,null),r.a.createElement("div",{className:t.textBlock},r.a.createElement("div",{className:t.name},a||"Anonymous"),r.a.createElement("div",{className:t.email},o||"anonymous")))}function Ee(e){var t=e.classes,n=e.profile,a=e.menuId,o=e.mobileMenuId,c=e.onProfileMenuOpen,l=e.onMobileMenuOpen,i=t.sectionDesktop,s=t.sectionMobile,u=n.email,m=n.name,p=n.pictureUrl;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i},r.a.createElement(G.a,{edge:"end","aria-label":"account of current user","aria-controls":a,"aria-haspopup":"true",onClick:c,color:"inherit"},r.a.createElement(je,{avatarImage:p,accountName:m,accountEmail:u}))),r.a.createElement("div",{className:s},r.a.createElement(G.a,{"aria-label":"show more","aria-controls":o,"aria-haspopup":"true",onClick:l,color:"inherit"},r.a.createElement(be.a,null))))}var Oe=Object(F.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(Y.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(Y.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object($.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object($.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(Y.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),formContainer:{marginLeft:e.spacing(2)},formControl:{margin:e.spacing(1),minWidth:120},sectionDesktop:Object(Y.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(Y.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function we(e){var t=Oe(),n=e.fetchProjects,o=Object(a.useContext)(h),c=o.filter,l=o.setFilter,i=o.sort,s=o.setSorting,u=o.regionsList,p=o.ownersList,b=o.projectManagersList,g=o.stagesList,v=o.fetchFiltersDefaultValues,j=o.setLoadProcessing,E=o.getActiveUserName,O=o.user,w=o.logOut;Object(a.useEffect)((function(){v()}),[]),Object(a.useEffect)((function(){j(!0),n({needToClean:!0})}),[c,i]);var C=O.profile,y=Object(a.useState)(c),k=Object(W.a)(y,2),x=k[0],_=k[1],M=[{label:"Region",currentValue:x.region,values:u,setValue:function(e){_(Object(m.a)(Object(m.a)({},x),{},{region:e.target.value}))}},{label:"Owner",currentValue:x.owner,values:p,setValue:function(e){_(Object(m.a)(Object(m.a)({},x),{},{owner:e.target.value}))}},{label:"PM",currentValue:x.project_manager,values:b,setValue:function(e){_(Object(m.a)(Object(m.a)({},x),{},{project_manager:e.target.value}))}},{label:"Stage",currentValue:x.pm_stage,values:g,setValue:function(e){_(Object(m.a)(Object(m.a)({},x),{},{pm_stage:e.target.value}))}},{label:"Only Active",currentValue:x.active?"Yes":"No",values:["Yes","No"],setValue:function(e){_(Object(m.a)(Object(m.a)({},x),{},{active:"Yes"===e.target.value}))}},{label:"Only my projects",currentValue:x.active_user_filter?"Yes":"No",values:["Yes","No"],setValue:function(e){_(Object(m.a)(Object(m.a)({},x),{},{active_user_filter:"Yes"===e.target.value?E():""}))}}],S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;void 0!==e?(_(Object(m.a)(Object(m.a)({},x),{},{name:e})),l(Object(m.a)(Object(m.a)({},x),{},{name:e}))):l(x)},N=Object(a.useState)(i),D=Object(W.a)(N,2),I=D[0],T=D[1],R=[{label:"Field",currentValue:I.field,values:["name","region","owner","expiration","stage"],setValue:function(e){T(Object(m.a)(Object(m.a)({},I),{},{field:e.target.value}))}},{label:"Order",currentValue:I.order,values:["ASC","DESC"],setValue:function(e){T(Object(m.a)(Object(m.a)({},I),{},{order:e.target.value}))}}],P=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"===t.key&&S(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F="primary-search-account-menu",L=r.a.useState(null),B=Object(W.a)(L,2),V=B[0],q=B[1],A=r.a.useState(null),H=Object(W.a)(A,2),K=H[0],Y=H[1],$=Boolean(V),G=Boolean(K),J=function(e){q(e.currentTarget)},X=function(){Y(null)},Z=function(){q(null),X()};return r.a.createElement("div",{className:t.grow},r.a.createElement(z.a,{position:"fixed"},r.a.createElement(Q.a,null,r.a.createElement(U.a,{className:t.title,variant:"h6",noWrap:!0},"Projects"),r.a.createElement(ne,{classes:{searchContainer:t.search,searchIcon:t.searchIcon,inputBaseRoot:t.inputRoot,inputBaseInput:t.inputInput},inputPlaceHolder:"Search projects",onKeyDown:P}),r.a.createElement(pe,{classes:{formContainer:t.formContainer,formControl:t.formControl},filterButtonText:"Filters",filterDialogTitle:"Filter projects",filtersObject:M,applyButtonText:"Apply filters",onApplyFilters:S,showEmptyValue:!0}),r.a.createElement(pe,{classes:{formContainer:t.formContainer,formControl:t.formControl},filterButtonText:"Sort",filterDialogTitle:"Sort projects",filtersObject:R,applyButtonText:"Sort",onApplyFilters:function(){s(I)},showEmptyValue:!1}),r.a.createElement("div",{className:t.grow}),r.a.createElement(Ee,{classes:{sectionDesktop:t.sectionDesktop,sectionMobile:t.sectionMobile},profile:C,menuId:F,mobileMenuId:"primary-search-account-menu-mobile",onProfileMenuOpen:J,onMobileMenuOpen:function(e){Y(e.currentTarget)}}))),r.a.createElement(ye,{mobileMoreAnchorEl:K,mobileMenuId:"primary-search-account-menu-mobile",isMobileMenuOpen:G,onMobileMenuClose:X,onProfileMenuOpen:J,profile:C}),r.a.createElement(Ce,{anchorEl:V,menuId:F,isMenuOpen:$,onMenuClose:Z,onLogOut:function(){w(),Z()}}))}function Ce(e){var t=e.anchorEl,n=e.menuId,a=e.isMenuOpen,o=e.onMenuClose,c=e.onLogOut;return r.a.createElement(X.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},id:n,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:o},r.a.createElement(J.a,{onClick:c},"Log Out"))}function ye(e){var t=e.mobileMoreAnchorEl,n=e.mobileMenuId,a=e.isMobileMenuOpen,o=e.onMobileMenuClose,c=e.onProfileMenuOpen,l=e.profile,i=l.name,s=l.email,u=l.pictureUrl;return r.a.createElement(X.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},id:n,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:o},r.a.createElement(J.a,{onClick:c},r.a.createElement(G.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(je,{avatarImage:u,accountName:i,accountEmail:s}))))}var ke=n(589),xe=n(609),_e=n(590),Me=n(372),Se=n(606),Ne=n(607),De=n(608),Ie=n(371),Te=n(249),Re=Object(F.a)({root:{width:"55vh",marginBottom:5},info:{display:"inline-block",width:"100%"},leftInfo:{float:"left"},rightInfo:{float:"right"},title:{fontSize:14},pos:{marginBottom:12}});function Pe(e){var t=Re(),n=e.psproject,o=Object(a.useContext)(h),c=o.user,l=o.setProjectWithCurrentMilestone,i=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.functions.getMilestoneScheduleOnwards(t._id);case 2:return a=e.sent,e.next=5,c.functions.getMilestoneForecast(t._id);case 5:r=e.sent,l({project:n,milestone:Object(m.a)(Object(m.a)({},t),{},{schedule:a}),forecast:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Se.a,{className:t.root},r.a.createElement(Ne.a,null,r.a.createElement("div",{className:t.info},r.a.createElement("div",{className:t.leftInfo},r.a.createElement(U.a,{className:t.title,color:"textSecondary",gutterBottom:!0},n.account)),r.a.createElement("div",{className:t.rightInfo},r.a.createElement(U.a,{className:t.title,color:"textSecondary",gutterBottom:!0},n.region))),r.a.createElement(U.a,{variant:"h5",component:"h2"},n.name),r.a.createElement("div",{className:t.info},r.a.createElement("div",{className:t.leftInfo},r.a.createElement(U.a,{className:t.pos,color:"textSecondary",gutterBottom:!0},"Owner: ",n.owner)),r.a.createElement("div",{className:t.rightInfo},r.a.createElement(U.a,{className:t.pos,color:"textSecondary",gutterBottom:!0},"PM: ",n.project_manager))),r.a.createElement(U.a,{variant:"body2",component:"p"},r.a.createElement("b",null,"Stage:")," ",n.details.pm_stage),r.a.createElement(U.a,{variant:"body2",component:"p"},r.a.createElement("b",null,"Status:")," ",n.details.pm_project_status),r.a.createElement(U.a,{variant:"body2",component:"p"},r.a.createElement("b",null,"Expires:")," ",Object(Te.toDateOnly)(n.details.product_end_date)),r.a.createElement(De.a,null),r.a.createElement(Ue,{milestones:n.milestones,onClickMilestone:i})))}function Ue(e){var t=e.milestones,n=e.onClickMilestone;return r.a.createElement(ke.a,{subheader:r.a.createElement("li",null)},r.a.createElement(xe.a,null,"Milestones"),t&&t.map((function(e){return r.a.createElement(_e.a,{button:!0,onClick:function(){return n(e)},key:e._id},r.a.createElement(Ie.a,{primary:e.name}))})))}function Fe(e){var t=e.classes,n=Object(a.useContext)(h),o=n.loadProcessing,c=n.projects;return r.a.createElement(ke.a,{component:"nav",className:t.listRoot,"aria-label":"contacts"},r.a.createElement(xe.a,{color:"primary"},r.a.createElement(U.a,{variant:"h5"},"Total projects: ",c?c.length:0)),o&&r.a.createElement(_e.a,null,r.a.createElement(Me.a,null)),!o&&c&&c.map((function(e){return r.a.createElement(_e.a,{key:e._id},r.a.createElement(Pe,{psproject:e}))})))}var Le=n(614),Be=n(158),Ve=n(112),qe=n.n(Ve),Ae=n(435),He=n.n(Ae),We=n(444),Ke=n.n(We),Ye=n(436),$e=n.n(Ye),ze=n(443),Qe=n.n(ze),Ge=n(310),Je=n.n(Ge),Xe=n(309),Ze=n.n(Xe),et=n(437),tt=n.n(et),nt=n(438),at=n.n(nt),rt=n(440),ot=n.n(rt),ct=n(441),lt=n.n(ct),it=n(442),st=n.n(it),ut=n(445),mt=n.n(ut),pt=n(439),dt=n.n(pt),ft=n(446),bt=n.n(ft);function gt(e){var t=e.onClickEditButton;return{Add:Object(a.forwardRef)((function(e,t){return r.a.createElement(He.a,Object.assign({},e,{ref:t}))})),Check:Object(a.forwardRef)((function(e,t){return r.a.createElement($e.a,Object.assign({},e,{ref:t}))})),Clear:Object(a.forwardRef)((function(e,t){return r.a.createElement(Ze.a,Object.assign({},e,{ref:t}))})),Delete:Object(a.forwardRef)((function(e,t){return r.a.createElement(tt.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(a.forwardRef)((function(e,t){return r.a.createElement(Je.a,Object.assign({},e,{ref:t}))})),Edit:Object(a.forwardRef)((function(e,n){return r.a.createElement(at.a,Object.assign({},e,{ref:n,onClick:t}))})),Export:Object(a.forwardRef)((function(e,t){return r.a.createElement(dt.a,Object.assign({},e,{ref:t}))})),Filter:Object(a.forwardRef)((function(e,t){return r.a.createElement(ot.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(lt.a,Object.assign({},e,{ref:t}))})),LastPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(st.a,Object.assign({},e,{ref:t}))})),NextPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(Je.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(Qe.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(a.forwardRef)((function(e,t){return r.a.createElement(Ze.a,Object.assign({},e,{ref:t}))})),Search:Object(a.forwardRef)((function(e,t){return r.a.createElement(ee.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(a.forwardRef)((function(e,t){return r.a.createElement(Ke.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(a.forwardRef)((function(e,t){return r.a.createElement(mt.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(a.forwardRef)((function(e,t){return r.a.createElement(bt.a,Object.assign({},e,{ref:t}))}))}}function ht(e){var t=e.projectId,n=e.tableName,o=e.currentColumns,c=e.currentData,l=Object(a.useContext)(h),i=l.isEditing,s=(l.setIsEditing,Object(a.useState)(o)),u=Object(W.a)(s,2),m=u[0],p=u[1],d=Object(a.useState)(c),f=Object(W.a)(d,2),b=f[0],g=f[1];return Object(a.useEffect)((function(){!i&&p(o)}),[i,t,o]),Object(a.useEffect)((function(){!i&&g(c)}),[i,t,c]),r.a.createElement(qe.a,{title:n,columns:m,data:b,options:{search:!1,sorting:!1,paging:!1,padding:"dense"}})}var vt=n(73);function jt(e){var t=e.projectId,n=e.tableName,o=e.currentColumns,c=e.currentData,l=e.onUpdate,i=Object(a.useContext)(h),s=i.isEditing,u=i.setIsEditing,m=Object(a.useState)(o),p=Object(W.a)(m,2),b=p[0],g=p[1],v=Object(a.useState)(c),j=Object(W.a)(v,2),E=j[0],O=j[1];Object(a.useEffect)((function(){!s&&g(o)}),[s,t,o]),Object(a.useEffect)((function(){!s&&O(c)}),[s,t,c]);return r.a.createElement(qe.a,{title:n,icons:gt({onClickEditButton:function(){return u(!0)}}),columns:b,data:E,options:{search:!1,sorting:!1,paging:!1,padding:"dense"},editable:{isEditable:function(e){return e.editable},onRowUpdate:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var a,r,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.tableKey,r=t.updateKey,e.next=4,l({updateKey:r,value:t[a]});case 4:o=Object(vt.a)(E),c=n.tableData.id,o[c]=t,O(Object(vt.a)(o)),u(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),u(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),onRowUpdateCancelled:function(){return u(!1)}}})}var Et=n(198),Ot=n(256);function wt(e){var t=e.projectId,n=e.tableName,o=e.currentColumns,c=e.currentData,l=e.onUpdate,i=Object(a.useContext)(h),s=i.isEditing,u=i.setIsEditing,m=Object(a.useState)(o),p=Object(W.a)(m,2),d=p[0],f=p[1],b=Object(a.useState)(c),g=Object(W.a)(b,2),v=g[0],j=g[1];Object(a.useEffect)((function(){!s&&f(o)}),[s,t,o]),Object(a.useEffect)((function(){!s&&j(c)}),[s,t,c]);return r.a.createElement(qe.a,{title:n,icons:gt({onClickEditButton:function(){return u(!0)}}),columns:d,data:v,options:{search:!1,sorting:!1,paging:!1},cellEditable:{isCellEditable:function(e,t){return e.tableData.id>4&&t.tableData.columnOrder>=1&&t.tableData.columnOrder<=3},onCellEditStarted:function(e,t){},onCellEditApproved:function(e,t,n,a){var r,o;switch(a.tableData.columnOrder){case 1:r=Object(Et.getThisMonth)(new Date);break;case 2:r=Object(Et.getNextMonth)(new Date);break;case 3:r=Object(Et.getNextMonth)(Object(Et.getNextMonth)(new Date,!1));break;default:r=null}switch(n.tableData.id){case 5:o="risk";break;case 6:o="upside";break;default:o=null}if(!r||!o)return Promise.reject();var c=Object(vt.a)(v),i=n.tableData.id,s=a.field;return c[i][s]=parseFloat(e),c[i].cq_call=Object(Ot.getCallFromThree)([c[i][0],c[i][1],c[i][2]]),j(Object(vt.a)(c)),l({month:r,updateKey:o,value:parseFloat(e)})}}})}function Ct(e){var t=e.projectId,n=e.tableName,o=e.currentColumns,c=e.currentData,l=e.onUpdate,i=Object(a.useContext)(h),s=i.isEditing,u=i.setIsEditing,m=Object(a.useState)(o),p=Object(W.a)(m,2),b=p[0],g=p[1],v=Object(a.useState)(c),j=Object(W.a)(v,2),E=j[0],O=j[1];Object(a.useEffect)((function(){!s&&g(o)}),[s,t,o]),Object(a.useEffect)((function(){!s&&O(c)}),[s,t,c]);return r.a.createElement(qe.a,{title:n,icons:gt({onClickEditButton:function(){return u(!0)}}),columns:b,data:E,options:{search:!1,sorting:!1,paging:!1,padding:"dense"},editable:{isEditable:function(e){return e.editable},onRowUpdate:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var a,r,o,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.name,r=t.email,o=t.updateKey,e.next=4,l({updateKey:o,value:{name:a,email:r}});case 4:c=Object(vt.a)(E),i=n.tableData.id,c[i]=t,O(Object(vt.a)(c)),u(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),u(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),onRowUpdateCancelled:function(){return u(!1)}}})}function yt(e){return"https://mongodb.my.salesforce.com/"+e}n(311);function kt(e,t,n){return"\n  \t  <div>\n\t\t  Hi ".concat(e,",\n\t\t  <br/><br/>\n\t\t  Thank you for using MongoDB Consulting.\n\t\t  <br/>\n\t\t  Take a quick <a href=").concat(function(e,t,n){return"https://mongodb.co1.qualtrics.com/jfe/form/SV_2oCghQbYfJdV5Mp?Name="+encodeURIComponent(e)+"&Email="+encodeURIComponent(t)+"&ProjectID="+encodeURIComponent(n)}(e,t,n),">survey</a> and tell us about your experience below.\n\t\t  <br/> <br/>\n\t\t  MongoDB Professional Services\n\t\t  <br/>\n\t  </div>")}function xt(e,t,n,a){return"\n  \t  <div>\n\t\t  Hi ".concat(e,",\n\t\t  <br/><br/>\n\t\t  Thank you for successfully completing the following PS Project: ").concat(n," - ").concat(a,".\n\t\t  <br/>\n\t\t  Take a quick <a href=").concat(function(e,t,n){return"https://mongodb.co1.qualtrics.com/jfe/form/SV_aUX8tfdgGcbd4j3?Name="+encodeURIComponent(e)+"&Email="+encodeURIComponent(t)+"&ProjectID="+encodeURIComponent(n)}(e,t,n),">survey</a> and share your experience below.\n\t\t  <br/> <br/>\n\t\t  MongoDB Professional Services\n\t\t  <br/>\n\t  </div>")}function _t(e,t,n,a){return{origEmail:e,toEmail:n,subject:"Thank you",html:kt(t,n,a)}}function Mt(e,t,n,a,r){return{origEmail:e,toEmail:n,subject:"Complete post-engagement survey",html:xt(t,n,a,r)}}function St(e){var t=e.classes,n=e.project,o=Object(a.useContext)(h),c=o.dbCollection,l=o.fcstCollection,i=o.user,s=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a,r,o,l,s,u,m,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.profile.email,a=t.contacts,r=a&&a.customer?a.customer.name:null,o=a&&a.customer?a.customer.email:null,l=t.name.indexOf(" "),s=t.name.substring(0,l),u=t.name.substring(l+1),m=a&&a.ce?a.ce.name:null,p=a&&a.ce?a.ce.email:null,r&&o&&m&&p){e.next=4;break}return alert("Contact information isn't complete!"),e.abrupt("return");case 4:return console.log(_t(n,r,o,s)),console.log(Mt(n,m,p,s,u)),e.next=8,i.callFunction("sendMail",_t(n,r,o,s));case 8:return e.next=10,i.callFunction("sendMail",Mt(n,m,p,s,u));case 10:return e.next=12,c.updateOne({_id:t._id},{$set:{survey_sent:!0,survey_sent_ts:new Date}});case 12:alert("Surveys sent!");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e,t){if(!e)return{milestonesTableColumns:[],milestonesTableRows:[]};var n=e._id,a=e.owner,o=e.region,c=e.project_manager,l=e.account,i=e.name,s=e.account_id,u=e.opportunity,m=e.details,p=e.survey_sent,d=e.currentMilestone;return{milestonesTableColumns:[{title:"Project / Milestone Fields",field:"name",editable:"never"},{title:"Value",field:"value",editable:"onUpdate",render:function(n){return"PM Stage"!==n.name||"Closed"!==n.value||n.survey_sent?n.link?r.a.createElement("a",{href:n.link,target:"_blank",rel:"noopener noreferrer"},n.value):n.value:[n.value,"   ",r.a.createElement("button",{onClick:function(){return t(e)}},"Send surveys")]}}],milestonesTableRows:[{name:"Project Owner",value:a,editable:!1},{name:"Region",value:o,editable:!1},{name:"Project Manager",value:c,editable:!1},{name:"PM Stage",value:m.pm_stage,editable:!0,survey_sent:p,tableKey:"value",updateKey:"details.pm_stage"},{name:"Account",value:l,link:yt(s),editable:!1},{name:"Opportunity",value:u.name,link:yt(u._id),editable:!1},{name:"PS Project Name",value:i,link:yt(n),editable:!1},{name:"Milestone Name",value:d.name,link:yt(d._id),editable:!1},{name:"Country",value:d.country,editable:!1},{name:"Milestone amount",value:d.details.milestone_amount,editable:!1},{name:"Gap Hours",value:d.summary.gap_hours,editable:!1},{name:"Unscheduled Hours",value:d.summary.unscheduled_hours,editable:!1}]}}(n,s),m=u.milestonesTableColumns,p=u.milestonesTableRows,b=function(e){return e?{scheduleTableColumns:[{title:"Date",field:"date",editable:"never"},{title:"Scheduled",field:"scheduled",editable:"never"},{title:"Hours",field:"hours",editable:"never",render:function(e){return 0==e.hours_nonbillable?e.hours:"".concat(e.hours," (").concat(e.hours_nonbillable," NB)")}},{title:"Resource(s)",field:"resources",editable:"never"}],scheduleTableRows:e.currentMilestone.schedule.map((function(e){return{date:Object(Te.toDateOnly)(e.week),scheduled:e.revenue?"$ ".concat(e.revenue.toFixed(0)):"-",hours:e.hours?e.hours:"-",resources:e.resources.join(","),hours_nonbillable:e.hours_nonbillable?e.hours_nonbillable:0,editable:!1}}))}:{scheduleTableColumns:[],scheduleTableRows:[]}}(n),g=b.scheduleTableColumns,v=b.scheduleTableRows,j=function(e){if(!e)return{forecastTableColumns:[],forecastTableRows:[]};e.currentMilestone;var t=e.forecast;return{forecastTableColumns:[{title:"N3M",field:"name"},{title:"Month + 0",field:"0"},{title:"Month + 1",field:"1"},{title:"Month + 2",field:"2"},{title:"Current Quarter",field:"cq_field"},{title:"Quarter Call",field:"cq_call"}],forecastTableRows:Object(Ot.convertForecastIntoRows)(t)}}(n),E=j.forecastTableColumns,O=j.forecastTableRows,w=function(e){if(!e)return{contactsTableColumns:[],contactsTableRows:[]};e._id;var t=e.contacts;return{contactsTableColumns:[{title:"Type",field:"type",editable:"never"},{title:"Name",field:"name",editable:"onUpdate"},{title:"Email",field:"email",editable:"onUpdate"}],contactsTableRows:[{type:"Customer",name:t&&t.customer?t.customer.name:"",email:t&&t.customer?t.customer.email:"",editable:!0,updateKey:"contacts.customer"},{type:"Consulting Engineer",name:t&&t.ce?t.ce.name:"",email:t&&t.ce?t.ce.email:"",editable:!0,updateKey:"contacts.ce"}]}}(n),C=w.contactsTableColumns,y=w.contactsTableRows,k=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,r,o,l,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.updateKey,r=t.value,o={_id:n._id},l={$set:Object(Y.a)({},a,r)},i={upsert:!1},e.next=6,c.updateOne(o,l,i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,r,o,c,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.month,r=t.updateKey,o=t.value,c={milestoneId:n.currentMilestone._id,month:a},i={$set:Object(Y.a)({},r,o)},s={upsert:!0},e.next=6,l.updateOne(c,i,s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,0!==p.length&&r.a.createElement("div",{className:t.tableContainer},r.a.createElement(jt,{projectId:n._id,tableName:"Project milestone info",currentColumns:m,currentData:p,onUpdate:k})),r.a.createElement("div",{className:t.tableContainer},r.a.createElement(Ct,{projectId:n._id,tableName:"Contact Information",currentColumns:C,currentData:y,onUpdate:k})),0!==v.length&&r.a.createElement("div",{className:t.tableContainer},r.a.createElement(ht,{projectId:n._id,tableName:"Schedule",currentColumns:g,currentData:v})),0!==O.length&&r.a.createElement("div",{className:t.tableContainer},r.a.createElement(wt,{projectId:n._id,milestoneId:n.currentMilestone._id,tableName:"Forecast",currentColumns:E,currentData:O,onUpdate:x})))}var Nt=Object(F.a)({tableContainer:{marginTop:"20px"}});function Dt(e){var t=Nt(),n=e.classes,o=Object(a.useContext)(h),c=o.projectWithCurrentMilestone,l=(o.projects,null),i=null,s=null;return c&&(l=c.project,i=c.milestone,s=c.forecast),r.a.createElement(Le.a,{container:!0},r.a.createElement(Le.a,{item:!0,xs:12},r.a.createElement(Be.a,{className:n.paper},r.a.createElement(U.a,{variant:"h4",gutterBottom:!0},"Milestones overview"),r.a.createElement(De.a,null),l&&i?r.a.createElement(St,{classes:t,project:Object(m.a)(Object(m.a)({},l),{},{currentMilestone:i,forecast:s})}):r.a.createElement("div",{className:t.tableContainer},r.a.createElement(U.a,{variant:"body1"},"Click on project milestone to see an overview...")))))}var It=Object(F.a)((function(e){return{container:{marginTop:70,display:"flex",flexDirection:"row"},root:{width:"90vh",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",minHeight:"90vh",height:"90vh"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.primary,whiteSpace:"normal",marginBottom:e.spacing(1),marginLeft:e.spacing(2),marginRight:e.spacing(1),maxHeight:"90vh",overflow:"auto"}}}));function Tt(){var e=It();return r.a.createElement("div",{className:e.container},r.a.createElement(Fe,{classes:{listRoot:e.root}}),r.a.createElement(Dt,{classes:{paper:e.paper}}))}var Rt=n(447),Pt=n(127);function Ut(){var e=Object(Rt.a)(["\n    query FindProjectsCustomResolver($filtersInput: FiltersInput!) {\n        psprojectsData(input: $filtersInput) {\n            _id\n            account\n            account_id\n            active\n            details {\n                pm_stage\n                pm_project_status\n                product_end_date\n            }\n            opportunity {\n                name\n                owner\n                engagement_manager\n                _id\n            }\n            milestones {\n                _id\n                country\n                currency\n                name\n                summary {\n                    planned_hours\n                    sold_hours\n                    delivered_hours\n                    gap_hours\n                    unscheduled_hours\n                }\n                details {\n                    first_scheduled_date\n                    last_scheduled_date\n                    bill_rate\n                    milestone_amount\n                    delivered_amount\n                }\n            }\n            name\n            owner\n            project_manager\n            region\n            stage\n            survey_sent\n            contacts {\n                customer {\n                    name\n                    email\n                }\n                ce {\n                    name\n                    email\n                }\n            }\n        }\n    }\n"]);return Ut=function(){return e},e}var Ft=n.n(Pt)()(Ut());function Lt(){var e=Object(a.useContext)(h),t=e.setProjects,n=e.setLoadProcessing,o=e.cleanLocalProjects,c=e.filter,l=e.sort,i=e.watcher,s={variables:{filtersInput:{filter:Object(m.a)({},c),sort:{field:l.field,order:"DESC"===l.order?-1:1}}}},u=Object(K.useLazyQuery)(Ft,Object(m.a)(Object(m.a)({},s),{},{onCompleted:function(e){t(e.psprojectsData),n(!1)},onError:function(e){console.error(e)},fetchPolicy:"network-only"})),p=Object(W.a)(u,1)[0],b=function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.needToClean,e.t0=n,!e.t0){e.next=5;break}return e.next=5,o();case 5:return e.next=7,p();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=setTimeout(function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g&&clearTimeout(g),e.next=3,i();case 3:g=setTimeout(t,5e3);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),5e3);return r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{fetchProjects:b}),r.a.createElement(Tt,null))}function Bt(){var e=Object(a.useContext)(h),t=e.realmAppId,n=e.getUserAccessToken,o=e.user,c=Object(a.useState)(Vt(t,n)),l=Object(W.a)(c,2),i=l[0],s=l[1];return Object(a.useEffect)((function(){s(Vt(t,n))}),[o]),r.a.createElement(K.ApolloProvider,{client:i},r.a.createElement(Lt,null))}function Vt(e,t){var n="https://realm.mongodb.com/api/client/v2.0/app/".concat(e,"/graphql");return new K.ApolloClient({link:new K.HttpLink({uri:n,fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(f.a)(d.a.mark((function e(n,a){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,a.headers.Authorization="Bearer ".concat(r),e.abrupt("return",fetch(n,a));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),cache:new K.InMemoryCache})}function qt(){var e=Object(a.useContext)(h),t=e.app,n=e.appName,o=e.copyrightLink,c=e.googleSignIn,l=e.googleHandleRedirect,i=e.user,s=e.setUser,u=Object(a.useRef)(t);return Object(a.useEffect)((function(){s(t.currentUser)}),[u.current.currentUser]),r.a.createElement(M.a,null,r.a.createElement(S.c,null,r.a.createElement(S.a,{exact:!0,path:"/google-callback",render:function(){return r.a.createElement("div",null,"Google Callback ",l())}}),r.a.createElement(S.a,{path:"/*",render:function(){return i?r.a.createElement(Bt,null):r.a.createElement(A,{appName:n,copyrightLink:o,googleSignIn:c})}})))}n(577);var At=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(_,null,r.a.createElement(qt,null)))}}]),n}(a.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(At,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[458,1,2]]]);
//# sourceMappingURL=main.9d5af390.chunk.js.map